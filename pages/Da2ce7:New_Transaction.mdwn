*New Transaction* is an proposal for a new extendable method of creating transactions.<br />
Each new transaction is defined by a random *txnumber* that should be unique globally.<br />
Advanced functions, such as transaction scripts, and importing and exporting can appropriately be done using the group of supporting functions.

### Transaction life-cycle
Every New Transaction goes through the following steps. (not always in the same order)

#### Build
In this stage, a transaction is being built:<br />

* Any feature of the transaction may be modified.
* Users can add, remove, any input, output or script.

#### Ready
In this stage, only certain features may be modified:<br />

* Only inputs may be changed. (is this correct, or will past signatures be destroyed if we change them?)
* Any other attribute that doesn't effect the existing signatures.

#### Done
In this stage, the transaction is complete, and would be accepted by the network:

* User still can add inputs, however all the outputs have already been fulfilled, these new inputs will be counted as fees.
* After any change, a 'done' transaction gets automatically demoted to 'Ready' state.

#### Submitted
In this stage the transaction has been published to the bitcoin network and is in/or is awaiting to be included in a block.

### Terms

*txnumber* is a random string given to every transaction for identification purposes.<br />
*pubkey* is assumed to be owned by the client that preforms the 'readying' of the transition (build > ready states)

**This entire processing is lazy!  Bitcoin will automatically fill-out everything just as it dose at-the-moment with the *readytransaction* stage.**

Please not this draft doesn't include all possible error responses.

## commands:
	
	/// make a new transaction (1 override)
	newtransaction
	newtransaction {name}
	
	response {unique_id}

	
	/// add an input to the transaction. (1 overrides)
	addinput {unique_id} {txid} {index}
	addinput {unique_id} {txid} {index} {comment}
	
	response {unique_id} {inid}

	
	/// add outputs to the transaction (6 overrides)
	/// add fee to transaction
	addoutput {unique_id} {amount} {forcedsuggestedoptional}
	addoutput {unique_id} {amount} {forcedsuggestedoptional} {comment}
	
	// add change address to transaction
	addoutput {unique_id} {pubkey}
	addoutput {unique_id} {pubkey} {comment}
	
	// add send outputs
	addoutput {unique_id} {address} {amount}
	addoutput {unique_id} {address} {amount} {comment}
	
	response  {unique_id} {outid}
	
	// add many send outputs
	addoutputlist {unique_id} {}{}[[amount]]
	
	response {unique_id}  {}[[outid]]

	
	/// remove input or outpus (1 override)
	remove {unique_id} {unique_id}
	remove {unique_id} {}[[unique_id]]
	
	response {unique_id} droped: {unique_id}
	response {unique_id} droped: {}[[unique_id]]

	
	/// prints out human readable information about the tranaction
	shownewtransaction {unique_id} (1 override)
	
	response {unique_id}
	in: {}{}{}[[,(comment)]]
	in total: {amount}
	out: {}{}{}[[,(comment)]]
	out total: {amount}
	fee: {amount}
	size: {readytxn bit}
	state: {building:ready:done:submitted}
	
	shownewtransaction {txid} (1 override)
	
	response {txid}
	in: {}{}{}[[,(comment)]]
	in total: {amount}
	out: {}{}[[,(comment)]]
	out total: {amount}
	fee: {amount}
	size: {readytxn bit}
	block: {block number}

	
	/// demote a transaction (1 override)
	demotetransaction {unique_id}
	demotetransaction {unique_id} {buildreadydone}
	
	response {unique_id} {buildingreadydone}

	
	/// exports a binary encoded transition (4 override)
	exporttransaction {unique_id}
	exporttransaction [[unique_id]]
	exporttransaction {txid}
	exporttransaction [[txid]]
	
	response {binary data}

	
	/// import binary encoded transition(s) (1 override)
	inporttransaction {binary data}
	inporttransaction {}[data](binary)
	
	response {}[[unique_id]]

	
	/// check and complete *build* translation (1 override)
	reddytransaction {unique_id}
	reddytransaction {}[[unique_id]]
	
	response {}[[unique_id]] {has made changesno changes needednot enough coinsinvalid transaction}

	
	/// sign *ready* transaction (6 override)
	signtransaction {unique_id}
	signtransaction {}[[unique_id]]
	
	// calls reddytransaction before hand if needed
	signtransaction -r {unique_id}
	signtransaction -r {}[[unique_id]]
	
	// sign a pre-signed/partial transaction (signs for owned private keys)
	signtransaction -o {unique_id}
	signtransaction -o {}[[unique_id]]
	
	response {}{}[failed](done)

	
	/// publish a *done* transaction to peers (2 override)
	// submits all 'done'  transactions
	submittransaction -a
	
	// submits a single  'done'  transaction
	submittransaction {unique_id}
	
	//  submits a list of 'done'  transaction
	submittransaction {}[[unique_id]]
	
	response {}{}[[txid]]

	
	/// complete transaction from any stage and publish it (1 override)
	completeransaction {unique_id}
	
	response {unique_id} {txid}

	
	/// delete a transaction from local client
	droptransaction {unique_id}
	
	responce dropped: {unique_id}
