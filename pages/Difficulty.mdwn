*See also: [[target]]*

### What is "difficulty"?

Difficulty is a measure of how difficult it is to find a new [[block]] compared to the easiest it can ever be.

### How often does the difficulty change?

Every 2016 [[blocks|block]].

### What is the formula for difficulty?

difficulty = maximum_target / current_target 

(target is a 256 bit number)

###How is difficulty stored in blocks?

Difficulty is stored in blocks as a 4 byte integer, and the actual hexadecimal [[target]] is derived from it via a predefined formula. For example, if the difficulty in the block is 0x1b0404cb, the hexadecimal target is
	0x0404cb * 2**(8*(0x1b - 3)) = 0x00000000000404CB000000000000000000000000000000000000000000000000

The highest possible target (difficulty 1) is defined as 0x1d00ffff, which gives us a hex target of
	0x00ffff * 2**(8*(0x1d - 3)) = 0x00000000FFFF0000000000000000000000000000000000000000000000000000

So the difficulty at 0x1b0404cb is therefore:
	0x00000000FFFF0000000000000000000000000000000000000000000000000000 /
	0x00000000000404CB000000000000000000000000000000000000000000000000 
	= 16307.420938523983

### What is the current difficulty?
[Current difficulty](http://blockexplorer.com/q/getdifficulty), as output by BitCoin's getDifficulty.

[Difficulty History](http://nullvoid.org/bitcoin/difficultiez.php)

### What is the maximum difficulty?
The maximum difficulty is roughly: maximum_target / 1, which is a ridiculously huge number (about 2^224). 

The actual maximum difficulty is when current_target=0, but we would not be able to calculate the difficulty if that happened. (fortunately it never will, so we're ok.)

### Can the difficulty go down?
Yes it can. See discussion in [[target]].

### What is the minimum difficulty?
The minimum difficulty, when the target is at the maximum allowed value, is 1.

### What network hash rate results in a given difficulty?
The difficulty is adjusted every 2016 blocks based on the time it took to find the previous 2016 blocks.  At the desired rate of one block each 10 minutes, 2016 blocks would take exactly two weeks to find.  If the previous 2016 blocks took more than two weeks to find, the difficulty is reduced.  If they took less than two weeks, the difficulty is increased.  The change in difficulty is in proportion to the amount of time over or under two weeks the previous 2016 blocks took to find.

To find a block, the hash must be less than the target.  The hash is effectively a random number between 0 and 2**256-1.  The offset for difficulty 1 is
	0xffff * 2**208
and for difficulty D is
	0xffff * 2**208)/D

The expected number of hashes we need to calculate to find a block with difficulty D is therefore
	D * 2**256 / (0xffff * 2**208)
or just
	D * 2**48 / 0xffff

The difficulty is set such that the previous 2016 blocks would have been found at the rate of one every 10 minutes, so we were calculating (D * 2**48 / 0xffff) hashes in 600 seconds.  That means the hash rate of the network was
	D * 2**48 / 0xffff / 600
over the previous 2016 blocks.  Can be further simplified to
	D * 2**32 / 600
without much loss of accuracy.

At difficulty 1, that is around 7 Mhashes per second.

At the time of writing, the difficulty is 22012.4941572, which means that over the previous set of 2016 blocks found the average network hash rate was
	22012.4941572 * 2**32 / 600 = around 157 Ghashes per second.

### How soon might I expect to generate a block?
(The [eternal question](https://www.bitcoin.org/smf/index.php?topic=1682.0).)

* Any one grinding of the hash stands the same chance of "winning" as any other.  The numbers game is how many attempts your hardware can make per second.
* You need to know the difficulty (above) and your khash/sec rate (reported by the client).
	* [[Mining_Hardware_Comparison]] has some stats that may help you predict what you could get.
* Visit a calculator or perform the maths yourself,
	* http://www.alloscomp.com/bitcoin/calculator.php
* Remember it's just probability!  There are no guarantees you will win every N days.

[[!template id=fromold difficulty]]

[[!tag "Technical"]]
[[!tag "Vocabulary"]]
